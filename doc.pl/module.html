<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html style="direction: ltr;" lang="pl"><head>

    
    
  
  <title>Podrêcznik Pnuts</title><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">

    
  <meta http-equiv="Content-Style-Type" content="text/css">

    
  <link type="text/css" rel="stylesheet" href="stylesheet.css"></head>

<body style="direction: ltr;">


<div class="nav">
<a href="guide.html">Podrêcznik Pnuts</a> -&gt; Modu³y
</div>


<!-- body start -->

<a name="module"></a>
<h1>Modu³y</h1>


<p>
<em>Mody³</em> pozwala na tworzenie skryptów do wielokrotnego
u¿ycia.Ka¿dy modu³ jest zazwyczaj pakietem jak pojedyñczy plik JAR
który mo¿e byæ dodany do&nbsp; <em>CLASSPATH</em> &nbsp;lub zlokalizowany w katalogu <tt>${PNUTS_HOME}/modules/</tt>. 
</p>
<p>Sekcja wyja¶nia jak tworzyæ modu³y.  Aby zapoznaæ siê z koncepcj± modu³ów proszê zajrzeæ do <a href="lang.html#modules">"Jêzyk Pnuts"</a>.
</p>


<h3>Kroki do stworzenia modu³u</h3>


<p>Modu³y mog± byæ pisane jako Pnuts, Java lub oba jednocze¶nie.Sekcja
wyja¶cnia jak pisaæ modu³y w jêzyku Pnuts. Pisanie modu³ów w Javie
znajduje sie w&nbsp;&nbsp; <a href="module_java.html">"Implementowanie modu³ów w Javie"</a>.
</p>


<ol>

  <li>Nazwa identyfikuje pakiet np. "<tt>org.acme.util</tt>"
    <div>Modu³ jest idetyfikowany przez t± nazwê.</div>

  </li>
  <li>Modu³ posiada specjany skrypt inicjalizacyjny <em>init.pnuts</em>, dla naszego przyk³adu bêdzie to&nbsp; "<tt>org/acme/util/init.pnut</tt>".Kiedy skrytpt zostanie wykonany bierz±cy pakiet jest ustawiany na&nbsp; "<tt>org.acme.util</tt>" oraz funkcje zawarte w module staj± siê dostepne.
  </li>
  <li>Je¿eli modu³ uzywa innych modu³ów trzeba je zarejestrowaæ przy pomocy&nbsp;
    <a href="lang.html#use"><tt>use()</tt></a> po zresetowaniu listy modu³ów w skrypcie <tt>org/acme/util/init.pnut</tt>. Je¿li nasz modu³ u¿ywa modu³u <tt>pnuts.lib</tt> nazle¿y zapisaæ to w nastêpuj±cy sposób:

    <pre class="eg">use(null)<br>use("pnuts.lib")<br><br>package("org.acme.util")<br><br>function hello(){<br>  println("hello")<br>}<br></pre>



  </li>
  <li>Archiwizacja skryptów w pliku JAR w celu dystrybucji.

  </li>
</ol>


<h3>Automatyczne ³adowanie</h3>


<p>Kiedy modu³ definiuje du¿± ilo¶æ funkcji mo¿na u¿yæ&nbsp; <a href="loading.html#autoload"><tt>autoload()</tt></a> do separacji skryptów na mniejsze jednostki i pozostawiæ ³adownaie symbolów do czasu ich pierwszego u¿ycia.
</p>
<ul>

  <li>Wstaw instrukcje&nbsp; '<tt>package("org.acme.util")</tt>' na pocz±tku ka¿dego skryptu.
  </li>
  <li>Zapisz skrypt jako&nbsp; <tt>org/acme/util/*.pnut</tt>.
  </li>
  <li>Zarejestruj skrypty za pomoc± <a href="loading.html#autoload"><tt>autoload</tt></a><tt>()</tt> która wywo³a <tt>org/acme/util/init.pnut</tt>.&nbsp;Dla przyk³adu: je¿eli funkcja&nbsp; <tt>play()</tt> jest zdefiniowana w <tt>org/acme/util/cdplayer.pnut</tt> wtedy mo¿a wykonaæ to tak:
  </li>
</ul>


<div>
<pre class="eg">autoload("play", "org/acme/util/cdplayer")<br></pre>

<center>org/acme/util/init.pnut</center>

</div>


<pre class="eg">&gt; use("org.acme.util")<br>...<br>&gt; play("something")<br>...<br></pre>


<p>Automatycznie ³adowane skrypty s± wykonywane w momencie u¿ycia komendy use().
</p>


<h3>Exportowanie symboli</h3>


<p>Domy¶lnie synbole odnosz±ce sie do funkcji s± automatycznie
eksportowane. Aby wyeksportowac inne symbole lub zdecydowaæ które
symbole maja byæ eksportowane a które nie mo¿na u¿yæ metody&nbsp;&nbsp;
<a href="../apidoc/pnuts/lang/Package.html#export%28java.lang.String%29"><tt>Package.export()</tt></a> w nastêpuj±cy sposób:
</p>
<p>

</p>
<pre class="eg">pkg = package()<br>pkg.export("play")<br></pre>


<p>Eksportoane sytmbole musz± byæ zdefiniowane lub byæ automatycznie ³adowane w przypadku wywo³ania&nbsp; <a href="../apidoc/pnuts/lang/Package.html#export%28java.lang.String%29"><tt>Package.export()</tt></a>.
</p>


<p>Kiedy implementujemy modu³ w Javie dziedziczac po klasie&nbsp; <tt>pnuts.ext.ModuleBase</tt> &nbsp;mamy mo¿liwo¶æ prostrzego i jednoczesnego sposobu na inicjazlizacjê i eksport symbolu:&nbsp;
</p>


<pre class="eg">EXPORTS.play = &lt;<em>object</em>&gt;<br></pre>


<h3>Inicjazlizacja modu³u w Javie&nbsp;</h3>


<p>Od czasu gdy istnieje mo¿liwo¶æ tworzenia ³adowlnych klass w Javie mo¿na inicjalizowaæ modu³y za pomoca kodu javy.
</p>

<p>
See <a href="loadable.html">"Implementing Loadable Class in Java"</a> and <a href="module_java.html">"Implementing a Module in Java"</a>.

</p>
<h3>Informacje o wersji modu³u</h3>


<p>Imformacja o wersji modu³u identyfikuje modu³ i pozwala na
sprawdzanie aktualno¶æ modu³u oraz umo¿liwia tworzenie dok³adnych
informacji o b³êdach.
</p>

<p>Aby dodaæ informacjê o wersji do modu³u nale¿y zdefiniowaæ&nbsp;  <a href="http://java.sun.com/j2se/1.3/docs/guide/versioning/index.html">'Package
Version ID</a> w pliku JAR.
</p>

<p>Dla przyk³adu zobaczmy plik manifestu gdzie w³a¶ciwo¶ci <tt>Specification-Version</tt> i <tt>Implementation-Version</tt> definiuj± wersje specyfikacji i implementacji
</p>


<pre class="eg">Manifest-version: 1.0<br>Name: org.acme.util<br>Specification-Title: Acme Library Functions<br>Specification-Version: 1.0<br>Specification-Vendor: Foo Bar, Inc.<br>Implementation-Title: org.acme.util<br>Implementation-Version: 20020704000000<br>Implementation-Vendor: Foo Bar, Inc.<br></pre>

<p>Aby dodaæ manifest do pliku JAR nale¿y przygotowaæ plik manifest.mf i dodaæ go za pomoc± komendy narzêdzia JAR:.
</p>

<pre class="eg">% jar cfm module.jar manifest.mf *<br></pre>

<p>Aby zobaczyæ informacjê o wersji mo¿na u¿yæ funkcji&nbsp; <a href="../modules/pnuts.util/doc/manifest.html#versionInfo"><tt>versionInfo()</tt></a> lub
<a href="../modules/pnuts.util/doc/manifest.html#manifest"><tt>manifest()</tt></a>.
</p>


<a name="dynamic_modules"></a>
<h2>Dynamiczne Modu³y</h2>

<p>Normalnie modu³y o których mowili¶my musz± byæ zaiplementowane przed
ich wykonaniem.&nbsp;Dynamiczne modu³y s± inne, s± definiowane w locie
bez inicjalizacji i wykonywania co powoduje ¿e nie maj± nazwy.
</p>

<p>Przepis na stworzenie modu³u dynamicznego:
</p>
<ol>

  <li>Utworzyæ objekt klasy pnuts.lang.Package wywo³uj±c funkcjê <a href="../modules/pnuts.lib/doc/package_op.html#createPackage"><tt>createPackage()</tt></a>, etc.
  </li>
  <li>Zdefiniowaæ zmienne w pakiecie
  </li>
  <li>Wywo³aæ <a href="lang.html#use"><tt>use()</tt></a> podaj±c w parametrze obiekt pakietu.
  </li>
  <li>Wywo³aæ <a href="../apidoc/pnuts/lang/Package.html#export%28java.lang.String%29"><tt>Package.export()</tt></a> dla ka¿dej eksportowanej zmiennej.
  </li>
</ol>

<p></p>

<pre class="eg">p = createPackage()<br>p.add = function (x, y) x + y<br>use(p)<br>p.export("add")<br><br>add(2, 3) ==&gt; 5<br></pre>


<!-- body end -->

<div class="nav2">
<a href="guide.html">Podrêcznik Pnuts</a>&nbsp;-&gt; Modu³y
</div>


  
</body></html>