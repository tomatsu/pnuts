<html>

  <head>
    <title>CHANGES</title>
    <META Http-Equiv="Content-Style-Type" Content="text/css">
    <LINK Type="text/css" Rel="stylesheet" Href="doc/stylesheet.css">
  </head>

<body>

<pre class="wb">
                            CHANGES
 
=======================================================================
Changes from Pnuts 1.2 to Pnuts 1.2.1
-----------------------------------------------------------------------
LANG
  - A new syntax for creating JavaBeans  
      CLASS_NAME { PROPERTY_NAME : VALUE ... }
    e.g.
      btn = java.awt.Button {
              label : "OK"
            }
    /*
     * The example above is interpreted as
     *      btn = new java.awt.Button()
     *      btn.label = "OK"
     *      btn
     */
  - Expression can be embedded in String literal
    e.g.
       "Date: \( date() \)"
  - Parallel assignment returns null
    e.g.
       a,b = [1,2]       --> null
  - Type declaration in class field can be omitted when some value is assigned
    e.g.
     class A {
       name2 = null   // In previous versions, this had to be 'Object name2 = null'
     }
  - Default behavior of the field access 'object.field' does not respect explicit bean info

API
  - Pnuts.parse(Reader, ...) and Pnuts.parse(InputStream, ...) throw IOException

Other
  - Added pnuts-lite.jar, which runs on Java ME CDC/FP-1.1
  - Performance tuning

=======================================================================
Changes from Pnuts 1.1 to Pnuts 1.2
-----------------------------------------------------------------------
LANG
   - class definition
     e.g.
        class Foo extends java.util.ArrayList implements Comparable {
            int ivalue = 100
            get(int idx){ ... }
        }

   - Compact syntax for anonymous function
     e.g.
        {a, b -> a + b}

   - Parallel assignment
        a, b = [1, 2]
        for (key, value : {1 => 2}){ ... }

   - vararg function can have one or more parameters
     e.g.
        function f(a,b,c[]) c
        f(1,2) --> []
        f(1,2,3) --> [3]
        f(1,2,3,4) --> [3,4]

   - {e1, e2, e3} returns a List object

   - Negative index of Arrays
     a[-1] is interpreted as a[size(a) - 1]

   - Binary operator (+, -, *, >, <, <=, >=) for arrays and collections
    e.g.
      {1,2} + [3]   --> [1,2,3]    // concatenation (for array/list), union(for set)
      {1,2} - [2]   --> [1]        // difference
      {1,2} * [2,4]   --> [2]      // intersection
      {1,2} > [1]   --> true

   - Array-List implicit conversion at method/constructor/Bean_properties.
   - Binary operator (+) for maps
    e.g.
      {1=>2} + {2=>4}   --> {1=2,2=4}
      {1=>2} + {1=>4}   --> {1=4}

   - int <-> float/double implicit conversion
   - boolean("non_empty_string") returns true

API
   - Added Package.asMap() and Package.wrap(Map)
   - org.pnuts.lang.PnutsClassLoader
   - Added Pnuts.createClassLoader()
   - PnutsFunction.defined(int)

MODULE
   - map(package) is added
   - pnuts.jmx module is added


=======================================================================
Changes from Pnuts 1.0 to Pnuts 1.1
-----------------------------------------------------------------------
LANG
   - New syntax: import <name>
     e.g.
         import java.io.*

   - New syntax: new <name>
     e.g.
         new java.lang.Object()

         new WindowAdapter(){
              windowClosing(e){ e.source.dispose() }
         }

   - New syntax: try/catch/finally
     + New keywords: 'try', 'finally'
     e.g.
        try {
          in = open("file1")
          read(in)
        } catch (Exception e){
          e.printStackTrace()
        }

   - New syntax: do/while
     e.g.
        i = 100
        do {
           --i
        } while (i > 0)

   - New syntax: Map expression
     e.g.
      { 'a' => 13, 'b' => 25 }

   - New syntax: array {elem1, elem2, ...}
     e.g.
      { 1, 2, 3 }

   - Simple Generators
      + A new keyword: 'yield'
      + Functions that contains yield expression returns a "generator"
        e.g.
        function integer(max){
          for (i:0..max) yield i
        }
        integer(100) ==> &lt;generator&gt;

     + for (i : &lt;generator&gt;) invokes the specified generator
       The values generated by the generator are assigned to the counter
       variable ('i' in this case) and the body of the for statement is executed.

     + foreach i (&lt;generator&gt;) ... is same as above

   - Cast expression and instanceof expression now take a type name, instead of a general expression
      e.g.
       (java.util.List)object
       object instanceof java.util.List

   - Ternary operator
      e.g.
        x < y ? x : y

   - throw statement
      e.g.
        throw new java.io.IOException("message");
        throw "message"

   - Local Scope Rule was clarified
      e.g.
          import java.awt.*
          function f(){
            if (false){
               Menu = JMenu
            }
            Menu     // ---> null
          }
    - if(non_boolean) is implicitly converted to if(boolean(non_boolean)),
      so as other conditional expressions

    - require() reloads the script if it has been updated since last loaded.

=======================================================================
Changes from Pnuts 1.0rc1 to Pnuts 1.0rc2
-----------------------------------------------------------------------
LANG
   - The default behavior of field access expression is to access a Java Beans property.
   - The reserved word 'class' can be used as a member name.
        e.g. "foo".class
   - A new syntax:
        for (var : arrayOrList) ...
        for (var : start .. end) ...
   - Builtin function <a href="doc/lang.html#use">use()</a> and <a href="doc/lang.html#loading">autoload()</a>.
   - Class search algorithm changes.
     1. A class loader associated with Pnuts context.
     2. The class loader associated with the current Thread (J2SE).
     3. The class loader by which Pnuts classes are loaded.
   - Newline is allowed after "(" and before ")".
   - array[start..end] returns [] when start > end or end < 0 or start >= array.length
   - Collection API support.
      + <a href="doc/lang.html#foreach">foreach</a> i (collection)
      + <a href="doc/lang.html#member">map.key</a>
      + <a href="doc/lang.html#map_elements">map[key]</a>
      + <a href="doc/lang.html#indexed">list[index]</a>
   - <a href="doc/lang.html#basics">"Basic Concepts"</a> in the Language spec.
     + <a href="doc/lang.html#modules">Module</a> is clarified.
     + <a href="doc/lang.html#scope">Scope Rule</a> is clarified.

Other
   - <a href="apidoc/pnuts/lang/Executable.html">pnuts.lang.Executable</a> is added. <a href="doc/loadable.html">Loadable classes</a> should implement this interface.
   - Context.setConfiguration() method is added. See <a href="doc/api.html#configuration">"Pnuts API Overview"</a>.
   - Pnuts.parse(Reader,Object,Context) is added.
   - Context.usePackage(String) returns boolean.
   - Context.setWriter(), Context.setOutputStream(), Context.getWriter(),
     Context.setErrorWriter(), Context.getErrorWriter(),
     Context.setTerminalWriter(), Context.getTermianlWriter() are added.
   - Context.getOutputStream() is replaced by Context.getWriter()
   - Context.get() and Context.set() takes interned string as a key.
   - pnuts.lang.PackagePermission moves to pnuts.security.PackagePermission.
   - The default value of 'pnuts.precompiled.script.prefix' property is "".
   - Property "pnuts.defaultConfiguration" is added.
   - Property "pnuts.defaultPnutsImpl" is added.
   - The start scripts are rewritten in C.  The startup programs use boot
     classloader instead of system classloader to load Pnuts classes. 
   - Some modules such as pnuts.lib, pnuts.servlet, and pnuts.regex module
     are rewritten in Java.
   - The standard modules are rewritten and packaged in pnuts-modules.jar.
   - <a href="doc/std.html">New modules</a>
     + pnuts.text
     + functional
     + metaobject (formerly pnuts.oop)
     + etc.
   - sort(array, function); 2nd argument is a function with one argument.
   - psh automatically starts pserv if it is not running.
   - new options of pnuts command: -w, -U, -F, -R, -version, and -help
   - new option of <a href="doc/hotstart.html">psh command</a>: -q, -w
   - <a href="modules/pnuts.servlet/doc/index.html">pnuts.servlet module</a>
     + new Servlet InitParameter "beanAccess" is added
   - pnuts.ext.ModuleBase class is added. 
   - pnuts.ext.BeanAccessConfiguration is deleted.
   - pnutool command is dropped.
     + pnuts -e 'pnutool()' or psh -e 'pnutool()'

MIGRATION FROM 1.0rc1
   - There are incompatible changes in the standard modules.  If you
   are using the standard modules in 1.0rc1, you should check if the
   functions are still available.
   - In 1.0rc, pnuts.jar includes core API and some basic module
   functions, whereas pnuts.jar in 1.0rc2 does not include any modules
   and the standard modules are packaged in pnuts-modules.jar. So if
   you are using any module functions, you need to add the JAR file to
   CLASSPATH or put in ${PNUTS_HOME}/modules/.
   - In 1.0rc2, autoload() is a builtin function.  If you are redefining
   autoload() function, it should be renamed.  Note also that the new
   autoload() function registers a symbol-script mapping to the current
   package, rather than the context.
  - If you are using Context.getOutputStream()/setOutputStream(), they
     need to be replaced by Context.getWriter()/setWriter(),
  - If you are passing a Writer object to Context.setOutputStream(), it need
    to be replaced by Context.setWriter().
  - Context.getTerminalStream()/setTerminalStream() are now marked deprecated.
    If any of these are being used, they should be replaced by
    Context.getTermianlWriter()/setTerminalWriter(),
  - Context.getErrorStream()/setErrorStream() are now marked deprecated.
    If any of these are being used, they should be replaced by
    Context.getErrorWriter()/setErrorWriter().

=======================================================================
Changes from Pnuts 1.0beta9a to Pnuts 1.0rc1
-----------------------------------------------------------------------
LANG
   - <a href="doc/lang.html#resolution">The order of name resolution of top level variables</a> is slightly changed.
       1. current package 
       2. module functions and builtin functions
       3. imported classes
       4. global package

   - Package names can include '.',  which was not allowed in previous versions.
      e.g.  package("foo.bar")
   - The mapping rule of a module name to the initialization script.
      e.g.  "foo.bar" ==> "foo/bar/init"
            "foo::bar" ==> "foo/bar/init"
            "org.bar.foo::baz" ==> "org/bar/foo/baz/init"
      The difference between :: and . is that :: makes a <a href="doc/lang.html#package_hierarchy">package hierarchy</a>.
   - semi-colon ';' can be used as the body part of function and while/for/foreach/if-else statement.
      e.g.  while (next()) ;

API
   - Deprecated methods of <a href=apidoc/pnuts/lang/Pnuts.html">Pnuts</a> class are deleted.
   - pnuts.ext.SecurePnutsImpl is renamed to <a href="apidoc/pnuts/security/SecurePnutsImpl.html">pnuts.security.SecurePnutsImpl</a>.
   - <a href="apidoc/pnuts/security/JAASPnutsImpl.html">pnuts.security.JAASPnutsImpl</a> is added.
   - Object oriented scripting feature moved to 'pnuts.oop' module.
   - pnuts.ext.UnitSystem moved to 'unitsys' module.
   - pnuts.ext.Complex and pnuts.ext.Fraction moved to 'pnuts.math' module.
   - pnuts.ext.ProtectedPackage is deleted.

Other
   - <a href="doc/guide.html">The standard modules are re-organized</a>.
   - <a href="doc/command.html#-a_option">-a option</a> is added to pnuts command.
      When this option is given in Java2 environment, non-public members can be accessed.
   - <a href="doc/debug.html#visualDebug">-vd option</a> is added to pnuts command.
      When this option is given, the visual debugger starts.
   - options of the <a href="doc/pnutsc.html">pnutsc command</a> are changed.
   - pnutool.jar is added
   - bash scripts are added

=======================================================================
Changes from Pnuts 1.0beta9 to Pnuts 1.0beta9a
-----------------------------------------------------------------------
API
   - The built-in functions, load(), loadFile(), and require() execute a
     script, setting the "current package" to the top of the package
     hierarchy (It does not have to be the global package).
     For example, a servlet script uses a clone of the global package
     as the top of the <a href="doc/api.html#package_hierarchy">package hierarchy</a>.  When some other script is
     loaded from a servlet script, it is executed in the clone package
     rather than the global package itself.

   - Pnuts.evalDepth() is replaced by Pnuts.evalDepth(Context)
     This change is needed to eliminate the memory leak problem.

   - PnutsFunction.call() methods which don't take a Context are deleted.
       public Object call(Object[])
       public static Object call(String, Object[])
       public static Object call(String, Object[], String)
Other
   - In interactive mode, if ${user.home}/.pnuts/init.pnut exists it is
     loaded at the start-up time.
   - <a href="doc/regex.html">Options for Regex pattern matching.</a>
   - <a href="doc/math.html">pnuts::math package</a> is added.
   - Bug fix of Pnuts Servlet.

=======================================================================
Changes from Pnuts 1.0beta8 to Pnuts 1.0beta9
-----------------------------------------------------------------------
LANG
   - <a href="doc/lang.html#use">use()</a>
     Previously, functions in the package to which use() is applied are defined
     in the global package.
     As of this version, those functions are saved in the Context object.
API
   - Pnuts.eval(String), Pnuts.loadFile(String), load(String), load(InputStream),
     load(Reader), and run() are deprecated to encourage to pass a Context object
     explicitly.
   - Pnuts.getClassLoader() is replaced by Context.getClassLoader()
   - Pnuts.setClassLoader() is replaced by Context.setClassLoader()
   - PnutsFunction.call(Object[]) is deprecated to encourage to pass a Context
     object explicitly.
   - pnuts.lang.Package::reset() is deleted.
   - pnuts.util.LocaleAdapter is deprecated.
   - Pnuts::registerQuantityFactory() is replaced by Context.registerQuantityFactory().
   - <a href="apidoc/pnuts/ext/SynchronizedFunction.html">pnuts.ext.SynchronizedFunction</a> class is added.
   - <a href="apidoc/pnuts/servlet/URLEncoding.html">pnuts.servlet.URLEncoding</a> class is added.

Other
   - <a href="doc/servlet_module.html">pnuts::servlet module</a> is provided to make servlet scripting easier.  (<a href="examples/servlet/">examples</a>)
   - <a href="doc/servlet.html"><tt>"this"</tt> variable</a> is defined in servlet scripts.
   - <a href="doc/regex.html">pnuts::regex module</a> is provided.
   - <a href="doc/console.html#print">print()</a> and <a href="doc/console.html#print">println()</a> function take arbitrary number of parameters
   - <a href="doc/sync.html">Synchronized Function, sync()</a>
   - The locale() function is replaced by <a href="doc/i18n.html">the series of formatXXX functions</a>.
   - Bug fixes.

=======================================================================
Changes from Pnuts 1.0beta7 to Pnuts 1.0beta8
-----------------------------------------------------------------------
LANG
   - The builtin function <a href="doc/lang.html#use"><tt>use()</tt></a> is extended.
      - When a function is defined in the use()'d package, the variable of
        the function is also defined in the global package.
      - use("a::b::c") loads 'a/b/c/init.pnut' if it exists.
      - use() returns the list of the package names that have been use()'d.
    This change is related to <a href="doc/overview.html#module">Modules</a>.

   - <a href="doc/lang.html#loading"><tt>require()</tt></a> is a builtin function as of this version.

API
   - <a href="doc/servlet.html">Servlet Scripting</a>
   - <a href="doc/jsp.html">JSP Tag Library for Pnuts</a>
   - <a href="doc/pnuts_engine.html#impl">PnutsImpl</a> class defines the interface of the script engine.
   - URL can be passed to Pnuts.load(), load()
   - <a href="doc/context.html#userDefined">Context.get()</a>, <a href="doc/context.html#userDefined">Context.set()</a>, and <a href="doc/context.html#userDefined">Context.keys()</a> are added.
      The purpose of these methods is to define variables which is indendent
      of syntactic scope.
   - pnuts.ext.JavaAdapter moved to pnuts.compiler.JavaAdapter
   - pnuts.compiler.CodeLoader is package protected
   - pnuts.ext.PnutsClient, pnuts.ext.PnutsProxy, and pnuts.ext.SimpleProxy are deleted.
   - pnuts2java translator is deleted

Other
   - <a href="doc/debug.html#visualDebug">Visual Debugger</a>
   - <a href="doc/ole.html">COM object can be accessed through JNI</a>
   - property "pnuts.engine" and "pnuts.loadpath" are deleted, "pnuts.debugger" is added.
   - Standard scripts are grouped into two packages: "pnuts::lib" and "pnuts::util".
   - <a href="examples/regex">examples/regex/*</a>

=======================================================================
Changes from Pnuts 1.0beta6 to Pnuts 1.0beta7
-----------------------------------------------------------------------
Lang
   - Unicode escape notation is added.
      "\u0041", '\u0041'
   - Syntax of if-else statement.
      newline is allowed before 'else' keyword.
   - The delimiter of nested functions name changes from '$' to '.'

API
   - <a href="doc/api.html#exception">Exception handling</a>
     In the previous versions, exceptions are caught within a call of
     Pnuts.eval(), Pnuts.load(), and Pnuts.loadFile(), unless the script
     is evaluated with a ManualContext.  As of this version,  exceptions
     propagate to the caller of those methods even when a normal Context
     is passed.
   - <a href="doc/extend_function.html#added">PnutsFunction.added()</a> method is added.
   - PnutsFunction.getId() method is deleted
Other
   - <a href="doc/command.html#args">variable '$args'</a>
   - <a href="doc/crypto.html">Cryptography functions</a>
   - <a href="doc/server.html">Personal Server</a> is now supported on Windows.

=======================================================================
Changes from Pnuts 1.0beta5 to Pnuts 1.0beta6
-----------------------------------------------------------------------
Language
   - Question mark (?) can be used in identifiers.
   - <a href="doc/lang.html#class">class("class_name")</a> returns null when the class 'class_name' is not found.
   - <a href="doc/lang.html#package_hierarchy">Package hierarchy</a> is introduced.

API
   - <a href="apidoc/pnuts/lang/Package.html#Package(java.lang.String, pnuts.lang.Package)">pnuts.lang.Package(String, Package)</a> and <a href="apidoc/pnuts/lang/Package.html#getParent()">Package.getParent()</a> are added.
   - <a	href="apidoc/pnuts/lang/PackageFactory.html#createPackage(java.lang.String, pnuts.lang.Package)">pnuts.lang.PackageFactory.createPackage(String, Package)</a>
   - <a	href="apidoc/pnuts/ext/ScriptPackage.html">pnuts.ext.ScriptPackage</a> is added.
   - <a href="doc/script_package.html">Function $()</a> returns pnuts.ext.ScriptPackage
       e.g.
         c = function (this) $(
               function m1() this.getClass(),
               function m2() this.hashCode()
             )
         i = c("hello")
         i.m1()
         i.m2()
   - <a href="apidoc/pnuts/ext/JavaAdapter.html">pnuts.ext.JavaAdapter</a> class is added.
   - <a href="doc/subclassing.html">Subclassing Java classes</a>
        e.g.
           a = javaAdapter(Object, $(function hello() "hello"))
           a.hello()

   - A new function <a href="doc/proxy.html">makeProxy()</a> maps Method/Constructor to a function in order 
     to optimize method/constructor call, by skipping method/constructor search.
       e.g.
         for(i=0;i<10000;i++) System::arraycopy(src, 0, dest, 0, src.length)

       can be optimized as below.

         arraycopy = makeProxy(System.getMethod("arraycopy", [Object, int, Object, int, int]))
         for(i=0;i<10000;i++)  arraycopy(src,0,dest,0,src.length)
    - <a href="apidoc/pnuts/ext/PnutsClient.html#PnutsClient(java.security.CodeSource)">pnuts.ext.PnutsClient(CodeSource)</a> is added.
    - <a href="doc/permission.html">pnuts.lang.PackagePermission</a> is added.
Other
    - <a href="doc/mobile.html">Secure mobile script</a> now supports on-the-fly compiler mode.
    - <a href="util/security.pnut">util/security.pnut</a> is added.
    - <a href="lib/adapter.pnut">lib/adapter.pnut</a> and <a href="lib/event.pnut">lib/event.pnut</a> were rewritten.
    - <a href="doc/command.html#-f">'-f' option</a> of the pnuts command.
    - bug fix

=======================================================================
Changes from Pnuts 1.0beta4 to Pnuts 1.0beta5
-----------------------------------------------------------------------
Language
   - Arithmetic operations of characters, shorts, bytes are defined
        'A' + #1 ==> 66
        'A' + 1.0 ==> 66.0
        ('A' > 60) ==> true
   - In Array comparison, elements are comapared by Object.equals() method,
     not Arithmetic.compareTo() method.
        ([1.0] == [1.0f]) ==> false
   - A new builtin function, class(fully_qualified_name)
        class java.lang.Object == class("java.lang.Object")
   - The word 'catch' is reserved.

API
   - The method signature of <a
	href="apidoc/pnuts/lang/AbstractData.html">pnuts.lang.AbstractData</a> and <a href="apidoc/pnuts/lang/Property.html">pnuts.lang.Property</a>.
   - New classes:
     - <a href="apidoc/pnuts/ext/PnutsBSFEngine.html">pnuts.ext.PnutsBSFEngine</a>
     - <a href="apidoc/pnuts/ext/PnutsObjectInputStream.html">pnuts.ext.PnutsObjectInputStream</a>
     - <a href="apidoc/pnuts/ext/PnutsComparator.html">pnuts.ext.PnutsComparator</a>
     - <a href="apidoc/pnuts/ext/PropertyAccessor.html">pnuts.ext.PropertyAccessor</a>
     - <a href="apidoc/pnuts/compiler/ClassFileHandler.html">pnuts.compiler.ClassFileHandler</a>
   - The return type of <a href="apidoc/pnuts/compiler/Compiler.html">pnuts.compiler.Compiler</a>#compile(PnutsFunction) changed 
     from void to PnutsFunction.

Other
   - New functions: <a href="doc/array.html">sort</a>, <a href="doc/random.html">random</a>, <a
	href="doc/md5.html">md5</a>, <a
	href="doc/encode.html">base64encode</a>, <a
	href="doc/utility.html#mkdir">mkdir</a>, <a
	href="doc/accessor.html">accessor</a>, <a href="doc/utility.html#find">find</a>, etc.
   - Local variables can be accessed in debugger.
   - Bug fixes

=======================================================================
Changes from Pnuts 1.0beta3 to Pnuts 1.0beta4
-----------------------------------------------------------------------
Language
   - The scope rule of eval() function and defined() changed.
     These functions can no longer refer local variables in
     the caller's scope.
      e.g.
         function func(x) eval("x");     func(1) ==> error
         function func(x) defined("x");  func(1) ==> false
   - A new builtin function, <a href="doc/lang.html#use">use</a>(pkgName).
   - A <a href="doc/lang.html#backquote">new syntax</a> `...` to create a string.
      e.g.
         `a = "A"` ==> "a = \"A\""
API
   - <a href="apidoc/pnuts/tools/package-summary.html">pnuts.tools</a> package is added.
   - <a href="apidoc/pnuts/compiler/package-summary.html">pnuts.compiler</a> package is added.
       To enable the on-the-fly compiler, set the property "pnuts.engine" to
       "pnuts.compiler.Compiler" at the startup time .
          e.g.
            java <b>-Dpnuts.engine=pnuts.compiler.Compiler</b> className
       'pnuts' command uses the on-the-fly compiler by default.  To use the pure 
       interpreter, specify '-pure' option.
          e.g.
             % pnuts -pure

   - Two methods are added in <a href="apidoc/pnuts/lang/PnutsInterpreter.html">pnuts.lang.PnutsInterpreter</a> to be able to use
     the pure interpreter explicitly.

         public Object accept(Pnuts pnuts, Context context)
         public Object load(Reader reader, boolean interactive, Context context)

   - <a href="apidoc/pnuts/lang/AutoloadHook.html">pnuts.lang.AutoloadHook</a> interface is added
Other
   - <a href="doc/loading.html#precompiled">loading compiled classes</a>
   - <a href="doc/classpath.html">setClassPath()</a> function
     This function allows to change the classpath dynamically. 

   - <a href="doc/compile.html">compile()</a> function
       e.g.(1)
            p = compile("1"); p.run()
       e.g.(2)
            compile(aFunction)
   - <a href="doc/server.html">"pserv" and "psh" command</a> are added.
   - '-d' option of 'pnuts' command is for <a href="doc/debug.html">the Pnuts debugger</a>.
   - <a href="doc/pnutsc.html">"pnutsc" command</a> is added.
   - Bug fixes

=======================================================================
Changes from Pnuts 1.0beta2 to Pnuts 1.0beta3
-----------------------------------------------------------------------
Language
   - <a href="doc/lang.html#cast">type cast expression</a>
     e.g. (int)3.9      ==> 3
          (int[])[1,2,3] ==> new int[]{1,2,3}
          object.method((int[])null)   // the type infomation is used to select a method/constructor
          (String)123   ==> throws ClassCastException
   - assignment to array_or_string[from..to]
     e.g. a = [1,2,3];  a[0..1] = 0    => [0,0,3]
          b = "ABC";  b[0..1] = 'Z'    => "ZZC"
          c = "ABC";  c[0..1] = "Z"    => "ZC"
   - assignment to string[index]
     e.g. a = "123";  a[0] = '0'    => "023"
   - arbitrary length arguments of <a href="doc/lang.html#function">function</a>
     e.g.  function array(args[]) args
           array(1,2,3,4) -> [1,2,3,4]
   - <a href="doc/lang.html#for">for statement</a> gets closer to Java
   - '\0' and "\0"
   - syntax @<em>class_name</em> is deleted.
   - array.sublist() is deleted
API
   - <a href="apidoc/pnuts/lang/ManualContext.html">pnuts.lang.ManualContext</a>, a subclass of Context, is defined.
     Context.setErrorStream(null) has no effect on how exceptions are caught
     in the interpreter as of this version.   An exception
     during an execution with ManualContext is thrown out of the static method
     call of pnuts.lang.Pnuts class.

   - <a href="apidoc/pnuts/lang/Context.html">Context</a>.setName(String) and getName() are added.
     The name of a context appears in an error message.
   - Context.defaultXXXXStream is final
   - Context.set()/get() are protected (not public)

   - <a href="apidoc/pnuts/lang/Pnuts.html">Pnuts</a>::parse() makes a pnuts.lang.Pnuts instance.
   - Pnuts.run() is added.
   - Pnuts.accept() is added.
   - pnuts.lang.Pnuts implements Serializable

   - <a href="apidoc/pnuts/lang/PackageFactory.html">pnuts.lang.PackageFactory</a> interface is defined
   - Package::setPackageFactory() method is added

   - <a href="doc/lang.html#indexed">pnuts.lang.Indexed</a> interface is added

   - return type of <a href="apidoc/pnuts/lang/PnutsFunction.html">PnutsFunction</a>.unparse(int) is changed
   - PnutsFunction.getPackage(int), PnutsFunction.getImportEnv(int) are added
Other
   - <a href="apidoc/pnuts/trans/package-summary.html">pnus.trans</a> package is added.  This package implements <a href="doc/trans.html">a Pnuts-to-Java translator</a>.
   - <a href="doc/mobile.html">pnuts.ext.PnutsClient</a> (based on JDK1.2 security)
      With this class, remote scripts can be executed as safely as Java applets.
   - <a href="doc/protected.html">pnuts.ext.ProtectedPackage</a>
      In this type of package, only exported names are visible from other package.
   - <a href="doc/vb.html">VBScript emulation</a> and <a
	href="doc/ole.html">OLE adapter</a> (based on MS Java <a
	href="http://www.microsoft.com/java/sdk/32/packages/ref_com_package_o.htm">com.ms.com</a> package)
   - bug fixes

=======================================================================
Changes from Pnuts 1.0beta1 to Pnuts 1.0beta2
-----------------------------------------------------------------------
Language
   - <, <=, >, >=, ==, != are defined for java.lang.Comparable.
   - array[from..to] e.g. a = [1,2,3];  a[0..1]  => [1,2];  a[1..] => [2,3] 
     This obsoletes array.sublist().
   - string[from..to] ==> string.substring(from,to+1)
     string[from..]   ==> string.substring(from)
     string[idx]      ==> string.charAt(idx)
   - expressions like "1." are no longer allowed.
   - primitiveType(obj) is defined.  e.g. int("123")  ==> 123
API
   - Context::defaultXXXXStream
   - Return type of Context.getXXXStream()
   - Constants of pnuts.lang.Numeric
   - pnuts.util.LocaleAdapter
   - pnuts.demo.* ==> demo.*
Other
   - The default pnuts_load_path is ["/"]
   - lib/init.pnut moved to init.pnut
   - error messages are in pnuts.properties
   - INT(),BYTE(),SHORT(),... are replaced by int(),byte(),short(),...
   - locale() is added
   - propertyEditor() is added
   - array() and arrayType() are deleted
   - demo.decimal.Decimal
   - bug fixes
   - <a href="license.html">source code and binary code license agreement</a>

=======================================================================
Changes from Pnuts 0.93 to Pnuts 1.0beta1
-----------------------------------------------------------------------
Language
   - type[] creates an array type
   - type[int] creates an array instance
API
   - new
     - PnutsFunction.unparse(int)
     - Pnuts.load(Reader, ...)
     - Pnuts::setVerbose(boolean), Pnuts::isVerbose()
     - Types.callMethod(...), Types.callConstructor(...)
   - modified
     - pnuts.lang.Package
     - PnutsFunction.call(...) is final
     - Context.setXXXStream(Object)
     - <a href="doc/pse.html">pnuts.ext.PSEPackage</a>
     - <a href="doc/class-oo.html">pnuts.ext.DynamicClass</a>
   - deleted
     - pnuts.lang.PnutsError
Other
   - verbose option "-v" of "pnuts" command
   - setVerbose(boolean) function in lib/init.pnut
   - <a href="doc/class-oo.html">The use of pnuts.ext.DynamicClass</a> is simplified
   - pnuts.permitUndefined and pnuts.import are deleted
   - int is renamed to INT and INT is renamed to int
   - supports javax.swing.
   - demo.* moved to pnuts.demo.*
   - <a href="examples/swing/fileViewer.pnut">examples/swing/fileViewer.pnut</a>
   - <a href="http://math.nist.gov/javanumerics/jama/">Jama</a> demo in <a href="examples/demo/matrix.pnut">examples/demo/matrix.pnut</a>
   - bug fixes

=======================================================================
Changes from Pnuts 0.92 to Pnuts 0.93
-----------------------------------------------------------------------
Language
   - <a href="doc/lang.html#quit">quit()</a> with one paramter terminates an interpreter session and
     Pnuts.load(), eval(), and loadFile() returns the value of the parameter.
   - <a href="doc/lang.html#return">return</a> from the top level is equivalent to <tt>quit()</tt>

Other
   - <a href="doc/keymap.html">key mapping</a>
   - <a href="apidoc/pnuts/ext/PSEPackage.html">pnuts.ext.PSEPackage</a>
   - bug fixes
      quit() in foreach, while, or for statement
   - improved error reporting
   - performance tuning

=======================================================================
Changes from Pnuts 0.91 to Pnuts 0.92
-----------------------------------------------------------------------
Language
   - undefined variable can not be used as of 0.92.
     e.g. > x
           ==> throws an exception, because 'x' is not defined.
          > x = null
          null
          > x
          null

       This is another incompatible change.  When the property
       "pnuts.permitUndefined" is not null this change is ignored.
       If you need this property for compatibility, please let us know.
       If no one responds it will be deleted in the future.
   - <a href="doc/lang.html#defined"><tt>defined()</tt></a>, a new builtin function, checks if the specified symbol
     is defined.
     e.g.
          > defined("x")
          false
   - comparison operators (<, >, ==, >=, <=) for String objects
     are based on String.compareTo() method.
     e.g. "A" < "B" ==> true
Other
   - <a href="doc/classloader.html">pnuts.ext.JarClassLoader</a> class
   - bug fixes

=======================================================================
Changes from Pnuts 0.90 to Pnuts 0.91
-----------------------------------------------------------------------
Language
  - <a href="doc/lang.html#import">import()</a> function takes a full-qualified name as in Java.
      e.g. import("java.awt.Frame")
           import("java.awt.*") instead of import("java.awt")

    This change breaks compatibility with older versions.   When the
    property "pnuts.import" is "old" this change is ignored.  In
    this case you have to copy $PNUTS/lib and $PNUTS/util from the
    distribution package of version 0.90.  If you need the property
    "pnuts.import" for your product please let us know.  If no one
    responds it will be deleted in the future.

Other
  - pnutool works on JavaStation and IE4.0
  - Package can be customized. See <a href="src/demo/pkg/MyPackage.java">src/demo/pkg/MyPackage.java</a>
  - syntax error can be caught. See <a href="doc/exception.html#syntax_error">Pnuts User's Guide</a>.

=======================================================================
Changes from Pnuts 0.80 to Pnuts 0.90
-----------------------------------------------------------------------
Language
  - suffix 'b' or 'B' for BigDecimal.
      e.g. 1.2B  makes a BigDecimal("1.2").
  - the syntax rule is a little more relaxed
    e.g. var =
         expression
  - some interfaces are defined for <a href="doc/lang.html#sugar">syntax extension</a>
    - arithmetic operation (<a href="apidoc/pnuts.lang.Numeric.html">pnuts.lang.Numeric</a>)
      e.g. complex(1,2) + complex(2,3)
    - plugable unit systems (<a href="apidoc/pnuts.lang.QuantityFactory.html">pnuts.lang.QuantityFactory</a>)
      e.g. 1cm, 3in
    - dot notation (<a
	href="apidoc/pnuts.lang.Property.html">pnuts.lang.Property</a>, <a href="apidoc/pnuts.lang.AbstractData.html">pnuts.lang.AbstractData</a>)
      e.g. obj.age = 18  ==> obj.set("age", 18)
  - autoload() is not only for functions.

Other
  - <a href="apidoc/Package-pnuts.ext.html">pnuts.ext</a> package is provided separately from the JAR file. The classes in
    the package are sample implementation of the syntax extension.
  - pnuts.lang.Package can be serialized
  - parameter of Context.setXXXStream() can be either Writer or OutputStream
  - Pnuts.load is unsynchronized
  - documents
  - bug fixes

=======================================================================
Changes from Pnuts 0.72 to Pnuts 0.80
-----------------------------------------------------------------------
Language
  - new builtin functions
    - quit() terminates the evaluation of the current InputStream
      without reading EOF.
    - catch() defines an exception handler in the stack frame.
      bindException() and unbindException() are deleted.
  - com.sun.java.util.collections.Iterator can be used in foreach
    statement, although it may not be included in the final spec.
    depending on how common the 1.1-collection will be.
  - The pnuts_class_loader variable is deleted for a security reason.
    Instead, Pnuts::setClassLoader(ClassLoader) is used. This change
    enables to restrict class access by defining a custom ClassLoader.
  - The name of nested functions are no longer accessible in global scope.
  - Syntax became a little more generous
      if (true) {}
      for (i = 0; i < 10; ) i++

Other
  - Package.elements() to enumerate sub-packages
  - PnutsFunction.getId() is added
  - Pnuts::callDepth() is deleted
  - pnuts.tool.* are deleted
  - more reliable error reporting
  - better swing support
  - document, demo
  - bug fixes

=======================================================================
Changes from Pnuts 0.71 to Pnuts 0.72
-----------------------------------------------------------------------
Language
  - more efficient implementation: both size and speed
  - import() to show imported packages
  - import(null) to clear the imports
  - bug fixes

Other
  - pnuts-core.zip which provides minimum classes

=======================================================================
Changes from Pnuts 0.70 to Pnuts 0.71
-----------------------------------------------------------------------
Language
  - post-increment, post-decrement expression; e.g. i++, i--
  - new keyword: continue
  - bug fixes

Scripts
  - /util directory ,to which some scripts moved from /lib.
    This change makes /lib smaller.
  - divided /examples into several subdirectories

API
  - Pnuts::set() is added for convenience.

Other
  - English license terms itself is effective, not just a translation from Japanese.
  - Separate JDK1.1 version and JDK1.2 version
  - FAQ

=======================================================================
Changes from Pnuts 0.61 to Pnuts 0.70
-----------------------------------------------------------------------
Language
  - 'class' became a keyword that indicate a class as '@'does.
      e.g. class java.lang.Object
  - Lexical scope for nested functions
  - Hierarchical package names
      e.g. package("a::b::c")
  - reorganize builtin functions
  - A new special variable 'pnuts_class_loader'
  - Improved error reporting
  - Syntax rule became a bit more generous
  - "0xff" style for Integer, "#ff" style for Byte

API
  - Package names changed to pnuts.lang.*.
  - Context class
  - Pnuts.eval()
  - PnutsFunction.call()
  - PnutsLayout

Function 
  - import() function
      e.g. import("java.awt")
  - package()
     To get current package
  - getContext()
     To get current context
  - Type conversion functions in lib/primitive.pnut
     int(string), byte(string), ...
  - layout()
  - handleException() => bindException()
  - unhandException() => unbindException()
  - make_array() => array()

Other
  - Sample Scripts
  - Command-line options
  - .pnuts => lib/init.pnut

=======================================================================
Changes from Pnuts 0.60 to Pnuts 0.61
-----------------------------------------------------------------------

Thread Priority Control
  - In 0.60 AWT script may need to lower the priority at the bottom of the
    script.  This change is to eliminate this.
    The interpreter loop reset the thread priority to Thread::NORM_PRIORITY
    before the execution and Thread::NORM_PRIORITY-2 afterward.  As changing
    priority is security sensitive operation in HJ, this change is only for
    standalone programs.

Foreach statement
  - foreach statement handles java.util.Iterator class as well, which will
    be included in JDK1.2.

API refinement
  - PnutsFunction class

Additional Sample Scripts
  - examples/shell.pnut

Bug fix
  - pnuts ksh script
  - eliminate VerifierError caused by javac -O option.

=======================================================================
Changes from Pnuts 0.55 to Pnuts 0.60
-----------------------------------------------------------------------

Language
  - Packages (no longer function as structure)
       See the language specification.
  - Object array to Primitive array conversion
      Pnuts Array is automatically converted to relevant types when
      a method is invoked.
       e.g. outputStream.write([#ca, #fe, #ba, #be]).
  - Anonymous function
       e.g. bind(frame, "windowClosing", function(e) e.getSource().dispose())

Event Adapter
  - In 0.55 bind() function can hook up pre-defined set of events to
    listener. In 0.60 bind() can deal with user-defined EventListener.
  - bind() function's 2nd parameter's type is String.

Additional Sample Scripts
  - HotJavaBrowserBean
  - Swing

Bug fix
  - Arithmetic expression
  - Scope rule
  - pnuts.loadpath parsing for Windows
</pre>
</body>
</html>
